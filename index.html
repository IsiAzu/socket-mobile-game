
<html>
	<head>
	
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript">
			var clients=[];
			////  SOCKETS ON  ////
			var socket = io.connect('http://104.131.40.84:8080/');
			socket.on('connect', function() {

				////  SHOW MY CONNECTION  ////
				var sessionid = socket.io.engine.id
				console.log("User Connected: " + sessionid);
        		//userList.innerHTML = sessionid;
            
			});

			////  GET OUR UPDATED CLIENT LIST  ////
			socket.on('clientList', function(data){
				clients = data;
				var list = document.getElementById('userList');
				userList.innerHTML = clients;
				console.log(clients);
			});
		
			////  GET ORIENTATION VALUES  ////
			function onOrientationChange(e) {
				var alpha = e.alpha,
            	beta = e.beta,
            	gamma = e.gamma;

            	////  GET VALUES FROM OTHER USERS ////
            	values = {a: alpha, b:beta, g:gamma};
            	socket.on('positionChange', function(values) {
            		 console.log("others: " + values)
            	});

            	////  SEND MY VALUES OUT  ////
            	var elem = document.getElementById('map');
            	map.innerHTML = "Alpha: " + Math.floor(alpha) + "  /  Beta: " + Math.floor(beta) + "  /  Gamma: " + Math.floor(gamma);
            	socket.emit('positionChange', values)
            	console.log(values);
            	
			}



			window.addEventListener('deviceorientation', onOrientationChange, false);

		 </script>
	</head>

	<body>
		<div id="userList"></div>
		<div id="map"><div>
	</body>
</html>
